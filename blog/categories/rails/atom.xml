<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: rails | mitaku.log]]></title>
  <link href="http://mitaku.github.io/blog/categories/rails/atom.xml" rel="self"/>
  <link href="http://mitaku.github.io/"/>
  <updated>2015-12-25T15:27:22+09:00</updated>
  <id>http://mitaku.github.io/</id>
  <author>
    <name><![CDATA[Takumi MIURA]]></name>
    <email><![CDATA[mitaku1104@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Rails4でのRSpec自動実行環境の作成]]></title>
    <link href="http://mitaku.github.io/blog/2013/07/10/rails4-testing-automation/"/>
    <updated>2013-07-10T00:15:00+09:00</updated>
    <id>http://mitaku.github.io/blog/2013/07/10/rails4-testing-automation</id>
    <content type="html"><![CDATA[<p>Rails4アプリでファイルの変更を検知し、RSpecを実行するようにする。
テストの結果はGrowlにて通知するようにする</p>

<h2>環境</h2>

<ul>
<li>Ruby 2.0.0</li>
<li>Rails 4.0.0</li>
<li>Mac OS X 10.8</li>
</ul>


<h2>利用するもの</h2>

<ul>
<li>Rspec</li>
<li>BDDフレームワーク</li>
<li>Guard</li>
<li>監視・実行の管理</li>
<li>Growl</li>
<li>通知</li>
<li>Spring</li>
<li>事前にアプリを立て、コマンドの実行を高速化する</li>
</ul>


<h2>準備</h2>

<h3>Gemfileの更新</h3>

<pre><code class="ruby">group :development, :test do
  gem 'rspec-rails'
  gem 'spring'
  gem 'guard'
  gem 'guard-rspec'
  gem 'growl'
end
</code></pre>

<p><code>bundle install</code></p>

<h3>rspec:install</h3>

<pre><code>spring g rspec:install
</code></pre>

<p><code>spec/spec_helper.rb</code>などが作成される</p>

<h3>guard init</h3>

<pre><code>gurad init
</code></pre>

<p><code>Guardfile</code>というGuardの設定を記述するファイルが生成される</p>

<h3>guard rspecでspringを使うようにする</h3>

<p><code>guard :rspec do</code>という記述を<code>guard :rspec, spring: true do</code>に変更する
これによってguardでrspecが動く場合にspringで立てたテスト用のプロセスで実行されるようになる</p>

<p>基本的に作業はこれだけ。
あとはファイルを更新してテストが走ったり、通知がいくことを確認できれば問題なし。</p>

<p>かなり簡単に自動でテストが回る環境が作れた。
無意識にテストが実行されフィードバックが返ってくるのはとてもよい。</p>

<p>Rails4が出たということで<code>database_cleaner</code>を始め開発環境を再度整えて行きたい</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Rails4でアプリケーションを作る]]></title>
    <link href="http://mitaku.github.io/blog/2013/07/07/generate-rails4-app/"/>
    <updated>2013-07-07T01:29:00+09:00</updated>
    <id>http://mitaku.github.io/blog/2013/07/07/generate-rails4-app</id>
    <content type="html"><![CDATA[<p>6/25 <a href="http://weblog.rubyonrails.org/2013/6/25/Rails-4-0-final/">Rails4.0.0がリリース</a>されました。</p>

<p>ということで早速Rails4でプロジェクトを作成。</p>

<ul>
<li>Ruby 2.0.0-p247</li>
<li>Rails 4.0.0</li>
<li>Mac OS X 10.8.7</li>
</ul>


<pre><code>gem install rails
</code></pre>

<h2>プロジェクトの作成</h2>

<pre><code>rails new your_project_name -B -T -d mysql
</code></pre>

<ul>
<li>rails new後のbundle installがとても嫌いなのでskip-bundleをしたいので<code>-B</code>オプションを付与</li>
<li>test-unitではなくRspecを使いたいので<code>-T</code>でTest::Unitのファイルが作成されるのを回避</li>
<li>今回はDBをMySQLにしたかったので<code>-d mysql</code></li>
<li>デフォルトはsqlite3</li>
</ul>


<h3>tree</h3>

<p>作られたファイルの確認</p>

<pre><code>.
├── Gemfile
├── README.rdoc
├── Rakefile
├── app
│   ├── assets
│   │   ├── images
│   │   ├── javascripts
│   │   │   └── application.js
│   │   └── stylesheets
│   │       └── application.css
│   ├── controllers
│   │   ├── application_controller.rb
│   │   └── concerns
│   ├── helpers
│   │   └── application_helper.rb
│   ├── mailers
│   ├── models
│   │   └── concerns
│   └── views
│       └── layouts
│           └── application.html.erb
├── bin
│   ├── bundle
│   ├── rails
│   └── rake
├── config
│   ├── application.rb
│   ├── boot.rb
│   ├── database.yml
│   ├── environment.rb
│   ├── environments
│   │   ├── development.rb
│   │   ├── production.rb
│   │   └── test.rb
│   ├── initializers
│   │   ├── backtrace_silencers.rb
│   │   ├── filter_parameter_logging.rb
│   │   ├── inflections.rb
│   │   ├── mime_types.rb
│   │   ├── secret_token.rb
│   │   ├── session_store.rb
│   │   └── wrap_parameters.rb
│   ├── locales
│   │   └── en.yml
│   └── routes.rb
├── config.ru
├── db
│   └── seeds.rb
├── lib
│   ├── assets
│   └── tasks
├── log
├── public
│   ├── 404.html
│   ├── 422.html
│   ├── 500.html
│   ├── favicon.ico
│   └── robots.txt
├── tmp
│   └── cache
│       └── assets
└── vendor
    └── assets
        ├── javascripts
        └── stylesheets

31 directories, 34 files
</code></pre>

<p>binやapp/models/concernsなどが増えていますね!</p>

<h2>rspec-railsの導入</h2>

<p><a href="https://github.com/rspec/rspec-rails">rspec/rspec-rails</a>に従って</p>

<pre><code># Gemfileに追加
group :development, :test do
  gem 'rspec-rails', '~&gt; 2.0'
end
</code></pre>

<pre><code>bundle
</code></pre>

<pre><code>rails g rspec:install
</code></pre>

<h2>db:create</h2>

<pre><code>rake db:crate
</code></pre>

<h2>server start</h2>

<pre><code>rails s
</code></pre>

<p>そんな訳でとりあえず起動した。</p>

<p>rspecのくだりは別にいらなかったね。</p>
]]></content>
  </entry>
  
</feed>
